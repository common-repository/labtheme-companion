jQuery(function(t){function e(){t("#course-metabox-list li").each(function(e){t(this).find("input:hidden").attr("name","_labtheme_images_course_id["+e+"]")})}function a(){t("#course-metabox-list").sortable({opacity:.6,stop:function(){e()}})}var i;t(document).on("click",".course-add",function(e){e.preventDefault(),i&&i.close(),i=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader-title"),button:{text:t(this).data("uploader-button-text")},multiple:!0}),i.on("select",function(){var e=t("#course-metabox-list li").index(t("#course-metabox-list li:last")),a=i.state().get("selection");a.map(function(a,i){a=a.toJSON(),index=e+(i+1),t("#course-metabox-list").append('<li><input type="hidden" name="_labtheme_images_course_id['+index+']" value="'+a.id+'"><img class="image-preview" src="'+a.sizes.thumbnail.url+'"><a class="change-image button button-small" href="#" data-uploader-title="Change image" data-uploader-button-text="Change image">Change image</a><br><small><a class="remove-image" href="#">Remove image</a></small></li>')})}),a(),i.open()}),t(document).on("click","#course-metabox a.change-image",function(e){e.preventDefault();var a=t(this);i&&i.close(),i=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader-title"),button:{text:t(this).data("uploader-button-text")},multiple:!1}),i.on("select",function(){attachment=i.state().get("selection").first().toJSON(),a.parent().find("input:hidden").attr("value",attachment.id),a.parent().find("img.image-preview").attr("src",attachment.sizes.thumbnail.url)}),i.open()}),t(document).on("click","#course-metabox a.remove-image",function(a){a.preventDefault(),t(this).parents("li").animate({opacity:0},200,function(){t(this).remove(),e()})}),a()});
jQuery(function(t){function e(){t("#event-metabox-list li").each(function(e){t(this).find("input:hidden").attr("name","_labtheme_images_event_id["+e+"]")})}function a(){t("#event-metabox-list").sortable({opacity:.6,stop:function(){e()}})}var i;t(document).on("click",".event-add",function(e){e.preventDefault(),i&&i.close(),i=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader-title"),button:{text:t(this).data("uploader-button-text")},multiple:!0}),i.on("select",function(){var e=t("#event-metabox-list li").index(t("#event-metabox-list li:last")),a=i.state().get("selection");a.map(function(a,i){a=a.toJSON(),index=e+(i+1),t("#event-metabox-list").append('<li><input type="hidden" name="_labtheme_images_event_id['+index+']" value="'+a.id+'"><img class="image-preview" src="'+a.sizes.thumbnail.url+'"><a class="change-image button button-small" href="#" data-uploader-title="Change image" data-uploader-button-text="Change image">Change image</a><br><small><a class="remove-image" href="#">Remove image</a></small></li>')})}),a(),i.open()}),t(document).on("click","#event-metabox a.change-image",function(e){e.preventDefault();var a=t(this);i&&i.close(),i=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader-title"),button:{text:t(this).data("uploader-button-text")},multiple:!1}),i.on("select",function(){attachment=i.state().get("selection").first().toJSON(),a.parent().find("input:hidden").attr("value",attachment.id),a.parent().find("img.image-preview").attr("src",attachment.sizes.thumbnail.url)}),i.open()}),t(document).on("click","#event-metabox a.remove-image",function(a){a.preventDefault(),t(this).parents("li").animate({opacity:0},200,function(){t(this).remove(),e()})}),a()});